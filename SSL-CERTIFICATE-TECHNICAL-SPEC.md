# SSL 证书技术规格

## 📋 证书密钥算法详情

### 公钥算法
```
算法: RSA Encryption (rsaEncryption)
密钥长度: 2048 bit
指数: 65537 (0x10001)
```

### 签名算法
```
算法: SHA-256 with RSA Encryption (sha256WithRSAEncryption)
哈希函数: SHA-256 (256位)
签名方案: PKCS#1 v1.5
```

---

## 🔐 完整证书信息

### 基本信息
```
版本: X.509 v3
颁发者: CN = *.qsgl.net (自签名)
主体: CN = *.qsgl.net
序列号: (唯一标识符)
```

### 有效期
```
生效时间: 2025-10-28 17:15:24 GMT
过期时间: 2028-10-29 17:15:24 GMT
有效时长: 3 年
```

### 公钥详情
```yaml
算法类型: RSA
密钥强度: 2048 位 (256 字节)
公共指数: 65537
模数长度: 2048 bit

模数 (Modulus):
  00:bd:c9:75:e3:35:8c:f0:d8:0d:94:0f:72:00:b8:
  7d:1e:a1:c8:5f:33:23:80:2c:e6:46:72:1f:9f:42:
  0d:da:7c:b6:2c:48:bc:2a:10:88:3e:ab:2d:3e:90:
  ...
  (2048 bit 完整密钥)
```

### X.509 v3 扩展
```yaml
密钥用途 (Key Usage) [关键]:
  - Digital Signature (数字签名)
  - Key Encipherment (密钥加密)

扩展密钥用途 (Extended Key Usage):
  - TLS Web Server Authentication (TLS Web 服务器认证)

主体备用名称 (Subject Alternative Name):
  - DNS: *.qsgl.net
  - DNS: qsgl.net
```

---

## 🔒 加密强度分析

### RSA 2048 位密钥强度

| 维度 | 评估 | 说明 |
|------|------|------|
| **安全等级** | ⭐⭐⭐⭐ 高 | 符合现代加密标准 |
| **抗暴力破解** | 💪 强 | 需要 2^2048 次运算 |
| **业界标准** | ✅ 符合 | NIST、FIPS 140-2 推荐 |
| **浏览器支持** | ✅ 全面 | 所有现代浏览器支持 |
| **有效期至** | 📅 2035+ | 预计安全至 2030-2035 年 |

### 与其他密钥长度对比

| 密钥类型 | 密钥长度 | 安全强度 | 使用建议 |
|----------|----------|----------|----------|
| RSA | 1024 bit | ❌ 弱 | 已废弃，不安全 |
| RSA | **2048 bit** | ✅ **强** | **当前标准**（推荐） |
| RSA | 3072 bit | ✅ 很强 | 金融、军事级 |
| RSA | 4096 bit | ✅ 极强 | 性能开销大 |
| ECC | 256 bit | ✅ 强 | 等同于 RSA 3072 |
| ECC | 384 bit | ✅ 很强 | 等同于 RSA 7680 |

### SHA-256 哈希算法

```
算法族: SHA-2 (Secure Hash Algorithm 2)
输出长度: 256 位 (32 字节)
碰撞抵抗性: 2^128 次运算
原像抵抗性: 2^256 次运算
安全等级: ⭐⭐⭐⭐⭐ 非常高
标准: FIPS 180-4
```

**优势:**
- ✅ 抗碰撞攻击
- ✅ 不可逆
- ✅ 雪崩效应明显
- ✅ 业界广泛采用

---

## 🌐 TLS/SSL 连接参数

### Envoy 支持的 TLS 版本
```yaml
TLS 1.2: ✅ 支持
TLS 1.3: ✅ 支持 (默认优先)
TLS 1.1: ❌ 已禁用 (不安全)
TLS 1.0: ❌ 已禁用 (不安全)
SSL 3.0: ❌ 已禁用 (不安全)
```

### ALPN 协议协商
```
h3:       HTTP/3 (QUIC)
h2:       HTTP/2
http/1.1: HTTP/1.1
```

### TLS 1.3 加密套件 (优先级从高到低)
```
1. TLS_AES_256_GCM_SHA384
2. TLS_AES_128_GCM_SHA256
3. TLS_CHACHA20_POLY1305_SHA256
```

### TLS 1.2 加密套件
```
- ECDHE-RSA-AES256-GCM-SHA384
- ECDHE-RSA-AES128-GCM-SHA256
- ECDHE-RSA-CHACHA20-POLY1305
```

---

## 📊 性能影响

### RSA 2048 位性能

| 操作 | 相对速度 | 说明 |
|------|----------|------|
| **密钥生成** | 慢 | 仅需一次 |
| **签名** | 中等 | 服务器端操作 |
| **验证** | 快 | 客户端操作 |
| **握手开销** | 中等 | 约 1-2ms |

**优化策略:**
- ✅ TLS 会话复用 (Session Resumption)
- ✅ TLS 1.3 0-RTT
- ✅ HTTP/2 连接复用

### RSA vs ECC 性能对比

| 指标 | RSA 2048 | ECC P-256 | 差异 |
|------|----------|-----------|------|
| 密钥大小 | 256 字节 | 32 字节 | ECC 小 8 倍 |
| 签名时间 | 1.0x | 0.3x | ECC 快 3 倍 |
| 验证时间 | 1.0x | 0.8x | ECC 略快 |
| 握手开销 | ~2ms | ~1ms | ECC 快 50% |

**为什么使用 RSA 2048？**
1. ✅ 兼容性最好（所有浏览器/设备）
2. ✅ 实现成熟稳定
3. ✅ 性能足够（现代 CPU 有硬件加速）
4. ✅ 易于管理和调试

---

## 🔬 安全性评估

### NIST 推荐强度
```
算法: RSA-2048 + SHA-256
安全级别: 112 位安全强度
等同于: AES-128 对称加密
有效期: 2030 年前完全安全
后量子时代: 仍需关注量子计算威胁
```

### SSL Labs 评级标准
假设使用受信任 CA（而非自签名）：
```
证书评分:
  密钥长度 (RSA 2048): A
  签名算法 (SHA-256): A
  协议支持 (TLS 1.2/1.3): A+
  加密套件: A

整体评级: A (如果使用受信任 CA)
```

### 潜在风险与缓解

| 风险 | 等级 | 缓解措施 | 状态 |
|------|------|----------|------|
| **量子计算攻击** | 🟡 中 (2030+) | 计划迁移到后量子加密 | ⏱️ 待定 |
| **RSA 因数分解** | 🟢 低 | 2048 位足够抵抗 | ✅ 安全 |
| **SHA-256 碰撞** | 🟢 极低 | SHA-256 非常安全 | ✅ 安全 |
| **中间人攻击** | 🟢 低 | TLS 1.3 + Perfect Forward Secrecy | ✅ 防护 |
| **自签名证书** | 🔴 高 | 用户需手动信任 | ⚠️ 注意 |

---

## 🆚 与其他加密方案对比

### 方案 A: 当前配置（RSA 2048 + SHA-256）
```yaml
优点:
  - ✅ 兼容性极好
  - ✅ 性能良好
  - ✅ 成熟稳定
  - ✅ 易于管理

缺点:
  - ⚠️ 密钥较大（256 字节）
  - ⚠️ 握手稍慢（相比 ECC）
  - ⚠️ 未来需升级（量子计算）
```

### 方案 B: ECC P-256 + SHA-256
```yaml
优点:
  - ✅ 密钥更小（32 字节）
  - ✅ 性能更好
  - ✅ 安全强度更高（等同 RSA 3072）

缺点:
  - ⚠️ 部分旧设备不支持
  - ⚠️ 实现复杂度较高
```

### 方案 C: RSA 4096 + SHA-384
```yaml
优点:
  - ✅ 安全性极高
  - ✅ 量子抵抗能力更强

缺点:
  - ❌ 性能开销大（慢 8 倍）
  - ❌ 证书和密钥体积大
  - ❌ 握手时间长
```

---

## 📈 未来升级路径

### 短期（1-2 年）
```
✅ 保持 RSA 2048 + SHA-256
✅ 启用 TLS 1.3
✅ 优化加密套件配置
```

### 中期（3-5 年）
```
🔄 考虑迁移到 ECC P-256 或 P-384
🔄 准备 RSA 3072 备选方案
🔄 关注后量子加密标准
```

### 长期（5+ 年）
```
🔮 迁移到后量子加密算法
🔮 采用混合加密方案
🔮 跟踪 NIST PQC 标准化
```

---

## 🛡️ 最佳实践建议

### ✅ 当前配置符合以下标准:

1. **NIST 推荐** (SP 800-57)
   - ✅ RSA 2048 位最低要求
   - ✅ SHA-256 哈希强度

2. **PCI DSS 4.0** (支付卡行业标准)
   - ✅ 2048 位或更高
   - ✅ TLS 1.2 或更高

3. **OWASP 推荐**
   - ✅ 强加密算法
   - ✅ 禁用弱密码套件

4. **浏览器要求**
   - ✅ Chrome/Edge/Firefox 完全支持
   - ✅ 移动设备兼容

### 🔧 进一步优化建议:

```yaml
1. 证书信任:
   - 使用 Let's Encrypt 免费 CA 证书
   - 避免自签名证书在生产环境

2. 性能优化:
   - 启用 OCSP Stapling
   - 配置 TLS Session Tickets
   - 使用 HTTP/2 Server Push

3. 安全加固:
   - 启用 HSTS (HTTP Strict Transport Security)
   - 配置 Certificate Transparency
   - 实施证书固定 (Certificate Pinning)

4. 监控:
   - 证书过期提醒（当前: 2028-10-29）
   - TLS 版本使用统计
   - 加密套件使用分析
```

---

## 📞 技术规格总结

```yaml
证书格式: X.509 v3
公钥算法: RSA 2048 位
签名算法: SHA-256 with RSA
密钥用途: Digital Signature, Key Encipherment
扩展用途: TLS Web Server Authentication
SAN 扩展: DNS:*.qsgl.net, DNS:qsgl.net
TLS 版本: 1.2, 1.3
ALPN 协议: h3, h2, http/1.1

安全评级: A (业界标准)
性能影响: 低 (1-2ms 握手开销)
兼容性: 优秀 (所有现代浏览器)
有效期: 2025-2028 (3 年)
```

---

## 🎓 技术术语解释

### RSA (Rivest-Shamir-Adleman)
非对称加密算法，使用公钥加密、私钥解密，基于大整数因数分解难题。

### SHA-256 (Secure Hash Algorithm 256-bit)
单向哈希函数，将任意长度数据转换为固定 256 位摘要。

### Subject Alternative Name (SAN)
X.509 证书扩展，允许一个证书覆盖多个域名。

### ALPN (Application-Layer Protocol Negotiation)
TLS 扩展，用于在握手时协商应用层协议（如 HTTP/2, HTTP/3）。

### Perfect Forward Secrecy (PFS)
即使长期密钥泄露，过去的会话密钥仍然安全。

---

**结论**: 当前配置使用 **RSA 2048 位** 公钥算法和 **SHA-256** 签名算法，符合业界标准，提供良好的安全性和性能平衡。✅
